<nz-page-header class="site-page-header" nzTitle="账单详情">
  <nz-breadcrumb nz-page-header-breadcrumb>
    <nz-breadcrumb-item>费用管理</nz-breadcrumb-item>
    <nz-breadcrumb-item><a>账单</a></nz-breadcrumb-item>
  </nz-breadcrumb>
</nz-page-header>

<form nz-form [formGroup]="searchForm" class="ant-advanced-search-form">
  <div nz-row [nzGutter]="24">
    <div nz-col [nzMd]="8" [nzLg]="8" [nzXl]="8">
      <nz-form-item>
        <nz-form-label [nzSpan]="6">代理机构</nz-form-label>
        <nz-form-control>
          <nz-select id="patentType" nzAllowClear formControlName="patentType">
            <nz-option nzValue="0" nzLabel="全部"></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
    </div>
    <div nz-col [nzMd]="8" [nzLg]="8" [nzXl]="8">
      <nz-form-item>
        <nz-form-label [nzSpan]="6">账单编号</nz-form-label>
        <nz-form-control>
          <input nz-input formControlName="billCode"/>
        </nz-form-control>
      </nz-form-item>
    </div>
    <div nz-col [nzMd]="8" [nzLg]="8" [nzXl]="8">
      <nz-form-item>
        <nz-form-label [nzSpan]="6">提案编号</nz-form-label>
        <nz-form-control>
          <input nz-input formControlName="proposalCode"/>
        </nz-form-control>
      </nz-form-item>
    </div>
  </div>

  <div nz-row [nzGutter]="24">
    <div nz-col [nzMd]="8" [nzLg]="8" [nzXl]="8">
      <nz-form-item>
        <nz-form-label [nzSpan]="6">应付金额</nz-form-label>
        <nz-form-control>
          <input nz-input formControlName="dueFee"/>
        </nz-form-control>
      </nz-form-item>
    </div>
    <div nz-col [nzMd]="8" [nzLg]="8" [nzXl]="8">
      <nz-form-item>
        <nz-form-label [nzSpan]="6">实付金额</nz-form-label>
        <nz-form-control>
          <input nz-input formControlName="actualPay"/>
        </nz-form-control>
      </nz-form-item>
    </div>
    <div nz-col [nzMd]="8" [nzLg]="8" [nzXl]="8">
      <nz-form-item>
        <nz-form-label [nzSpan]="6">付款日期</nz-form-label>
        <nz-form-control>
          <nz-range-picker [(ngModel)]="payDateRange" (ngModelChange)="onChange($event)"
            formControlName="payDateRange" style="width: 100%;"></nz-range-picker>
        </nz-form-control>
      </nz-form-item>
    </div>
  </div>

  <div nz-row [nzGutter]="24">
    <div nz-col [nzMd]="8" [nzLg]="8" [nzXl]="8">
      <nz-form-item>
        <nz-form-label [nzSpan]="6">费用类型</nz-form-label>
        <nz-form-control>
          <nz-select id="type" nzAllowClear formControlName="type">
            <nz-option nzValue="0" nzLabel="全部"></nz-option>
            <nz-option nzValue="1" nzLabel="官费"></nz-option>
            <nz-option nzValue="2" nzLabel="代理费用"></nz-option>
            <nz-option nzValue="3" nzLabel="其他费用"></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
    </div>
    <div nz-col [nzMd]="8" [nzLg]="8" [nzXl]="8">
      <nz-form-item>
        <nz-form-label [nzSpan]="6">缴费状态</nz-form-label>
        <nz-form-control>
          <nz-select id="status" nzAllowClear formControlName="status">
            <nz-option nzValue="0" nzLabel="全部"></nz-option>
            <nz-option nzValue="1" nzLabel="未支付"></nz-option>
            <nz-option nzValue="2" nzLabel="已支付"></nz-option>
            <nz-option nzValue="3" nzLabel="不支付(放弃)"></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
    </div>
    <div nz-col [nzMd]="8" [nzLg]="8" [nzXl]="8" class="search-area">
      <button nz-button (click)="resetForm()">重置</button>
      <button nz-button (click)="search()" 
        [nzType]="'primary'" style="margin-left: 8px;">搜索</button>
    </div>
  </div>

</form>

<div>
  <button nz-button nzType="primary" (click)="create()" style="margin-top: 8px;">
    新增账单</button>
</div>

<nz-table #myProposalTable nzBordered nzSize="small" [nzScroll]="{ x: '1400px' }"
  nzShowPagination nzShowSizeChanger [nzData]="dataSet">
  <thead>
    <tr>
      <th nzWidth="60px" nzLeft="0px">序号</th>
      <th nzWidth="120px" nzLeft="60px">账单编号</th>
      <th nzWidth="160px">提案名称</th>
      <th nzWidth="100px">代理机构</th>
      <th nzWidth="160px">缴费状态</th>
      <th nzWidth="160px">应付金额</th>
      <th nzWidth="160px">实付金额</th>
      <th nzWidth="240px">账单付款日期</th>
      <th nzWidth="80px" nzRight="160px">电子发票</th>
      <th nzWidth="160px" nzRight="0px">操作</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let data of myProposalTable.data; let i = index">
      <td nzLeft="0px">{{ i+1 }}</td>
      <td nzLeft="60px">{{ data.billCode }}</td>
      <td>{{ data.proposalName }}</td>
      <td>{{ data.agency }}</td>
      <td>{{ data.status }}</td>
      <td>{{ data.dueFee }}</td>
      <td>{{ data.actualPay }}</td>
      <td>{{ data.payDate }}</td>
      <td nzRight="160px">
        <button nz-button>查看</button>
      </td>
      <td nzRight="0px">
        <button nz-button (click)="delete()">删除</button>
        <button nz-button (click)="edit()" style="margin-left: 8px;">编辑</button>
      </td>
    </tr>
  </tbody>
</nz-table>
